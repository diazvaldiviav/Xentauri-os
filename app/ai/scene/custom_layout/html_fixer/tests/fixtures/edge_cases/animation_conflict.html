<!--
  Fixture: animation_conflict
  Sprint: 8
  Error Types: TRANSFORM_3D_HIDDEN
  Description: Elements using 3D transforms with animations that cause visibility issues.
               Backface visibility and perspective problems during animation states.
  Expected Fix: Add preserve-3d, perspective, and backface-visibility fixes.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animation Transform Conflicts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 3D flip card with broken backface */
        .flip-card {
            perspective: 1000px;
        }

        .flip-card-inner {
            transition: transform 0.6s;
            transform-style: flat; /* Bug: should be preserve-3d */
        }

        .flip-card:hover .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            backface-visibility: visible; /* Bug: should be hidden for proper flip */
        }

        .flip-card-back {
            transform: rotateY(180deg);
        }

        /* Rotating carousel with visibility issues */
        @keyframes spin3d {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        .carousel-item {
            animation: spin3d 10s linear infinite;
            /* Missing preserve-3d causes children to flatten */
        }

        /* Bouncing card that loses depth */
        @keyframes bounce3d {
            0%, 100% { transform: translateZ(0) scale(1); }
            50% { transform: translateZ(50px) scale(1.1); }
        }

        .bounce-card {
            animation: bounce3d 2s ease-in-out infinite;
            /* No perspective on parent causes flat appearance */
        }
    </style>
</head>
<body class="bg-gray-900 min-h-screen p-8">
    <div class="max-w-4xl mx-auto space-y-12">
        <h1 class="text-3xl font-bold text-white">3D Animation Conflicts</h1>

        <!-- Flip card with broken backface -->
        <section>
            <h2 class="text-xl text-white mb-4">Flip Card (Hover to flip)</h2>
            <div class="flip-card w-64 h-40 cursor-pointer">
                <div class="flip-card-inner relative w-full h-full">
                    <!-- Front face -->
                    <div class="flip-card-front absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl p-4 flex items-center justify-center">
                        <button
                            id="flip-front-btn"
                            onclick="this.textContent = 'Clicked!'; event.stopPropagation()"
                            class="flip-btn px-4 py-2 bg-white text-blue-600 rounded-lg font-semibold"
                        >
                            Front Button
                        </button>
                    </div>

                    <!-- Back face - shows through incorrectly -->
                    <div class="flip-card-back absolute inset-0 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl p-4 flex items-center justify-center">
                        <button
                            id="flip-back-btn"
                            onclick="this.textContent = 'Back clicked!'; event.stopPropagation()"
                            class="flip-back-btn px-4 py-2 bg-white text-green-600 rounded-lg font-semibold"
                        >
                            Back Button
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rotating carousel with flattened children -->
        <section>
            <h2 class="text-xl text-white mb-4">3D Carousel (Auto-rotating)</h2>
            <div class="relative h-48 flex items-center justify-center">
                <div class="carousel-item">
                    <div class="bg-white rounded-xl shadow-2xl p-6 w-64">
                        <h3 class="font-bold mb-2">Carousel Card</h3>
                        <p class="text-gray-600 text-sm mb-4">This should maintain 3D depth</p>
                        <button
                            id="carousel-btn"
                            onclick="this.classList.toggle('bg-green-500')"
                            class="carousel-action-btn w-full py-2 bg-indigo-500 text-white rounded-lg"
                        >
                            Action
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bouncing card without proper perspective -->
        <section>
            <h2 class="text-xl text-white mb-4">Bouncing Card (No Perspective)</h2>
            <div class="flex justify-center">
                <!-- Missing perspective wrapper -->
                <div class="bounce-card bg-white rounded-xl shadow-2xl p-6 w-72">
                    <h3 class="font-bold text-lg mb-2">Bouncing Element</h3>
                    <p class="text-gray-600 text-sm mb-4">Animation loses 3D effect</p>
                    <div class="space-y-2">
                        <button
                            id="bounce-btn-1"
                            onclick="this.textContent = 'Primary!'"
                            class="bounce-primary-btn w-full py-2 bg-purple-500 text-white rounded-lg"
                        >
                            Primary Action
                        </button>
                        <button
                            id="bounce-btn-2"
                            onclick="this.textContent = 'Secondary!'"
                            class="bounce-secondary-btn w-full py-2 border-2 border-purple-500 text-purple-500 rounded-lg"
                        >
                            Secondary Action
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>
</html>
